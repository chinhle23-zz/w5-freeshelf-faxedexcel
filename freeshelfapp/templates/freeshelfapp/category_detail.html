{% extends "base_generic.html" %}

{% block content %}
<section class="category">
    <span>Books by category:</span>
    {% if categories %}
        <span class="category_nav">
            {% for category in categories %}
                <a href="{{ category.get_absolute_url }}">{{ category }}</a> |
            {% endfor %}
        </span>
    {% else %}
        <p>There are no categories in the database</p>
    {% endif %}
</section>
<h2>Category: {{ category }}</h2>
<section class="book">
    {% if category.book_set.all %}
        {% for book in category.book_set.all %}
        <section class="title_author">
            <span class="book_title">
            <a href="{{ book.url }}">{{ book }}</a>
            </span>
            <span class="author"> by
                {% for author in book.author.all %}
                    <!--'book.author.all' is used instead of 'book.author_set.all' is used here b/c the ManyToMany declaration was done in the Book class definition-->
                    <a href="{{ author.get_absolute_url }}">{{ author }}</a>,
                {% endfor %}
            </span>
        </section>
        <p>{{ book.summary }}</p>
        <section class="favorite_date">
            <span class="favorite">Favorited {{ books.count }} times | </span>
            <span>added {{ book.date_added }} | </span>
        </section>
        {% endfor %}
    {% else %}
        <p>There are no books in the database</p>
    {% endif %}
</section>
{% endblock %}